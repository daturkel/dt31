<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Search" href="../../search.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>dt31.instructions - dt31 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />




<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;

  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;

    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;

      }
    }
  }
</style></head>
  <body>

    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">dt31  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">

      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">

  <span class="sidebar-brand-text">dt31  documentation</span>

</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Reference</a></li>
</ul>

</div>
</div>

      </div>

    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <h1>Source code for dt31.instructions</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TYPE_CHECKING</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">dt31.operands</span><span class="w"> </span><span class="kn">import</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">Operand</span><span class="p">,</span> <span class="n">Reference</span><span class="p">,</span> <span class="n">as_op</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">dt31.cpu</span><span class="w"> </span><span class="kn">import</span> <span class="n">DT31</span>  <span class="c1"># pragma: no cover</span>

<span class="n">INPUT_PROMPT</span> <span class="o">=</span> <span class="s2">&quot;&gt; &quot;</span>


<div class="viewcode-block" id="Instruction">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.Instruction">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Instruction</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all DT31 instructions.</span>

<span class="sd">    Instructions are the fundamental building blocks of DT31 programs. Each instruction</span>
<span class="sd">    performs a specific operation when executed by the CPU, such as arithmetic, logic,</span>
<span class="sd">    memory manipulation, or control flow.</span>

<span class="sd">    Execution Model</span>
<span class="sd">    ---------------</span>
<span class="sd">    When an instruction is executed (via `__call__`), it follows a two-phase process:</span>

<span class="sd">    1. **Calculation phase** (`_calc`): Computes the instruction&#39;s result value and</span>
<span class="sd">       performs any side effects (e.g., writing to memory, pushing to stack).</span>
<span class="sd">    2. **Advance phase** (`_advance`): Updates the instruction pointer (IP) to determine</span>
<span class="sd">       which instruction executes next. By default, increments IP by 1, but jump</span>
<span class="sd">       instructions override this to change control flow.</span>

<span class="sd">    Implementing New Instructions</span>
<span class="sd">    ------------------------------</span>
<span class="sd">    To create a new instruction, subclass `Instruction` (or, even better, a helper subclass</span>
<span class="sd">    like `NullaryOperation`, `UnaryOperation`, or `BinaryOperation`) and implement:</span>

<span class="sd">    - `__init__(self)`: Pass the instruction&#39;s args to the `__init__` method of the parent</span>
<span class="sd">      class.</span>
<span class="sd">    - `_calc(cpu)`: Perform the instruction&#39;s operation and return a result value.</span>
<span class="sd">      This value is available to the instruction but typically only used for operations</span>
<span class="sd">      that need to store results (via `NullaryOperation`,`BinaryOperation` or `UnaryOperation`</span>
<span class="sd">      base classes).</span>
<span class="sd">    - `_advance(cpu)` (optional): Override to customize how the instruction pointer moves.</span>
<span class="sd">      Default behavior increments IP by 1. Jump instructions override this to modify</span>
<span class="sd">      control flow.</span>
<span class="sd">    - `__str__()` (optional): Return a human-readable representation showing the</span>
<span class="sd">      instruction name and operands for debugging and display purposes.</span>

<span class="sd">    Consult the source of existing instructions as a guide.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Simple unary operation (square a value):</span>
<span class="sd">    ```python</span>
<span class="sd">    class SQUARE(UnaryOperation):</span>
<span class="sd">        \&quot;\&quot;\&quot;Square a value (a * a).\&quot;\&quot;\&quot;</span>
<span class="sd">        def __init__(self, a: Operand, out: Reference | None = None):</span>
<span class="sd">            super().__init__(&quot;SQUARE&quot;, a, out)</span>

<span class="sd">        def _calc(self, cpu: DT31) -&gt; int:</span>
<span class="sd">            val = self.a.resolve(cpu)</span>
<span class="sd">            return val * val</span>
<span class="sd">    ```</span>

<span class="sd">    Custom instruction with multiple operands (swap two registers):</span>
<span class="sd">    ```python</span>
<span class="sd">    class SWAP(Instruction):</span>
<span class="sd">        \&quot;\&quot;\&quot;Swap the values of two registers.\&quot;\&quot;\&quot;</span>
<span class="sd">        def __init__(self, a: Reference, b: Reference):</span>
<span class="sd">            super().__init__(&quot;SWAP&quot;)</span>
<span class="sd">            self.a = a</span>
<span class="sd">            self.b = b</span>

<span class="sd">        def _calc(self, cpu: DT31) -&gt; int:</span>
<span class="sd">            val_a = self.a.resolve(cpu)</span>
<span class="sd">            val_b = self.b.resolve(cpu)</span>
<span class="sd">            self.a.assign(cpu, val_b)</span>
<span class="sd">            self.b.assign(cpu, val_a)</span>
<span class="sd">            return 0</span>

<span class="sd">        def __str__(self) -&gt; str:</span>
<span class="sd">            return f&quot;{self.name}({self.a}, {self.b})&quot;</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Instruction.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.Instruction.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an Instruction.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: The name of the instruction (e.g., &quot;ADD&quot;, &quot;JMP&quot;, &quot;PUSH&quot;).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform the instruction&#39;s operation and return a result value.</span>

<span class="sd">        This method must be implemented by subclasses to define the instruction&#39;s</span>
<span class="sd">        behavior. It performs the core operation (arithmetic, comparison, I/O, etc.)</span>
<span class="sd">        and returns an integer result.</span>

<span class="sd">        Args:</span>
<span class="sd">            cpu: The DT31 CPU instance executing this instruction.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The computed result value. For instructions that write to operands</span>
<span class="sd">            (via `BinaryOperation` or `UnaryOperation`), this value is stored</span>
<span class="sd">            in the output location. For other instructions, the return value</span>
<span class="sd">            may be unused.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: Must be implemented by subclasses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_advance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the instruction pointer to determine the next instruction.</span>

<span class="sd">        By default, increments the instruction pointer by 1 to execute the next</span>
<span class="sd">        sequential instruction. Jump instructions override this method to modify</span>
<span class="sd">        control flow (e.g., jumping to a different location or returning from a call).</span>

<span class="sd">        Args:</span>
<span class="sd">            cpu: The DT31 CPU instance executing this instruction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># default behavior is to increment the instruction register by 1</span>
        <span class="n">cpu</span><span class="o">.</span><span class="n">set_register</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">cpu</span><span class="o">.</span><span class="n">get_register</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="Instruction.__call__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.Instruction.__call__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute the instruction on the given CPU.</span>

<span class="sd">        This is the main entry point for instruction execution. It orchestrates</span>
<span class="sd">        the two-phase execution model by calling `_calc` followed by `_advance`.</span>

<span class="sd">        This function is overridden in some of the subclasses like `UnaryOperation` and</span>
<span class="sd">        `BinaryOperation` to handle storing results.</span>

<span class="sd">        Args:</span>
<span class="sd">            cpu: The DT31 CPU instance to execute this instruction on.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The result value computed by `_calc`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_advance</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span></div>


<div class="viewcode-block" id="Instruction.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.Instruction.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation of the instruction.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string showing the instruction name and any operands in Python syntax.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">()&quot;</span></div>


<div class="viewcode-block" id="Instruction.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.Instruction.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation of the instruction.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string showing the instruction in assembly text format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span></div>



<div class="viewcode-block" id="NOOP">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NOOP">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NOOP</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Do nothing but advance instruction pointer.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="NOOP.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NOOP.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;NOOP&quot;</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span></div>



<div class="viewcode-block" id="NullaryOperation">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NullaryOperation">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NullaryOperation</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for instructions which take no input operands and write to an output</span>
<span class="sd">    operand.&quot;&quot;&quot;</span>

    <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span>  <span class="c1"># Always set to a Reference in __init__</span>

<div class="viewcode-block" id="NullaryOperation.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NullaryOperation.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Base class for instructions which take no input operands and write to an</span>
<span class="sd">        output operand.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: The name of the instruction (e.g., &quot;RND&quot;).</span>
<span class="sd">            out: Output reference for result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">Reference</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;argument `out` must be a Reference&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">out</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="n">cpu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">value</span>

<div class="viewcode-block" id="NullaryOperation.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NullaryOperation.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(out=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="NullaryOperation.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NullaryOperation.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="UnaryOperation">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.UnaryOperation">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">UnaryOperation</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for instructions which utilize a single operand and optionally write</span>
<span class="sd">    to a separate operand.&quot;&quot;&quot;</span>

    <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span>  <span class="c1"># Always set to a Reference in __init__</span>

<div class="viewcode-block" id="UnaryOperation.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.UnaryOperation.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">Reference</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;argument `out` must be a Reference or None&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">out</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">Reference</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> must be called with a reference as operand `out` or a reference as operand `a`&quot;</span>
            <span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="n">cpu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">value</span>

<div class="viewcode-block" id="UnaryOperation.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.UnaryOperation.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(a=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">!r}</span><span class="s2">, out=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="UnaryOperation.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.UnaryOperation.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<span class="c1"># ---------------------------------- bitwise and alu --------------------------------- #</span>
<div class="viewcode-block" id="BinaryOperation">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BinaryOperation">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BinaryOperation</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for instructions which utilize two operands and optionally write</span>
<span class="sd">    to a separate operand.&quot;&quot;&quot;</span>

    <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span>  <span class="c1"># Always set to a Reference in __init__</span>

<div class="viewcode-block" id="BinaryOperation.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BinaryOperation.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Base class for instructions which take two operands and optionally write to a</span>
<span class="sd">        separate operand.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">Reference</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;argument `out` must be a Reference or None&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">Reference</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">out</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">Reference</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> must be called with a reference as operand `out` or a reference as operand `a`&quot;</span>
            <span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="n">cpu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">value</span>

<div class="viewcode-block" id="BinaryOperation.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BinaryOperation.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(a=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">!r}</span><span class="s2">, b=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">!r}</span><span class="s2">, out=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="BinaryOperation.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BinaryOperation.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="ADD">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.ADD">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ADD</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add operands a and b.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="ADD.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.ADD.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the addition.</span>
<span class="sd">            b: Second operand of the addition.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;ADD&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="SUB">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.SUB">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SUB</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Subtracts operand b from operand a.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="SUB.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.SUB.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the subtraction.</span>
<span class="sd">            b: Second operand of the subtraction.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;SUB&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="MUL">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.MUL">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MUL</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Multiplies operands a and b.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="MUL.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.MUL.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the multiplication.</span>
<span class="sd">            b: Second operand of the multiplication.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;MUL&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="DIV">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.DIV">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DIV</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Divide operand a by b (using floor division).&quot;&quot;&quot;</span>

<div class="viewcode-block" id="DIV.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.DIV.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the addition.</span>
<span class="sd">            b: Second operand of the addition.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;DIV&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="MOD">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.MOD">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MOD</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate operand a modulo operand b.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="MOD.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.MOD.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the modulus.</span>
<span class="sd">            b: Second operand of the modulus.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;MOD&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="BSL">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BSL">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BSL</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shift operand a left by operand b bits.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BSL.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BSL.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the bit shift.</span>
<span class="sd">            b: Second operand of the bit shift.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;BSL&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="BSR">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BSR">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BSR</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shift operand a right by operand b bits.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BSR.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BSR.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the bit shift.</span>
<span class="sd">            b: Second operand of the bit shift.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;BSR&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="BAND">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BAND">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BAND</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Take the bitwise and of operands a and b.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BAND.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BAND.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the bitwise and.</span>
<span class="sd">            b: Second operand of the bitwise and.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;BAND&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="BOR">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BOR">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BOR</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Take the bitwise or of operands a and b.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BOR.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BOR.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the bitwise or.</span>
<span class="sd">            b: Second operand of the bitwise or.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;BOR&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="BXOR">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BXOR">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BXOR</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Take the bitwise xor of operands a and b.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BXOR.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BXOR.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the bitwise xor.</span>
<span class="sd">            b: Second operand of the bitwise xor.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;BXOR&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">^</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="BNOT">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BNOT">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BNOT</span><span class="p">(</span><span class="n">UnaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Take the bitwise negation operand a.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BNOT.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BNOT.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: Operand to be negated.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;BNOT&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">~</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<span class="c1"># ------------------------------------ comparisons ----------------------------------- #</span>
<div class="viewcode-block" id="LT">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.LT">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">LT</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store 1 if operand a is less than operand b else 0.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="LT.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.LT.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the comparison.</span>
<span class="sd">            b: Second operand of the comparison.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;LT&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span></div>



<div class="viewcode-block" id="GT">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.GT">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">GT</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store 1 if operand a is greater than operand b else 0.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="GT.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.GT.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the comparison.</span>
<span class="sd">            b: Second operand of the comparison.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;GT&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span></div>



<div class="viewcode-block" id="LE">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.LE">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">LE</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store 1 if operand a is less than or equal to operand b else 0.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="LE.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.LE.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the comparison.</span>
<span class="sd">            b: Second operand of the comparison.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;LE&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span></div>



<div class="viewcode-block" id="GE">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.GE">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">GE</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store 1 if operand a is greater than or equal to operand b else 0.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="GE.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.GE.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the comparison.</span>
<span class="sd">            b: Second operand of the comparison.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;GE&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span></div>



<div class="viewcode-block" id="EQ">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.EQ">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">EQ</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store 1 if operand a is equal to operand b else 0.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="EQ.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.EQ.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the comparison.</span>
<span class="sd">            b: Second operand of the comparison.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;EQ&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span></div>



<div class="viewcode-block" id="NE">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NE">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NE</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store 1 if operand a is not equal to operand b else 0.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="NE.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NE.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the comparison.</span>
<span class="sd">            b: Second operand of the comparison.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;NE&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span></div>



<span class="c1"># ---------------------------------- pythonic logic ---------------------------------- #</span>
<div class="viewcode-block" id="AND">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.AND">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AND</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store 1 if both operands are nonzero (truthy) else 0.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="AND.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.AND.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the logical and.</span>
<span class="sd">            b: Second operand of the logical and.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;AND&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span></div>



<div class="viewcode-block" id="OR">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.OR">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">OR</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store 1 if either operand is nonzero (truthy) else 0.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="OR.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.OR.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the logical or.</span>
<span class="sd">            b: Second operand of the logical or.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;OR&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span></div>



<div class="viewcode-block" id="XOR">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.XOR">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">XOR</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store 1 if exactly one operand is nonzero (truthy) else 0.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="XOR.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.XOR.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: First operand of the logical xor.</span>
<span class="sd">            b: Second operand of the logical xor.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;XOR&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">((</span><span class="n">a</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">b</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">b</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">a</span><span class="p">))</span></div>



<div class="viewcode-block" id="NOT">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NOT">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NOT</span><span class="p">(</span><span class="n">UnaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store 1 if operand is zero (falsy) else 0.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="NOT.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NOT.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: Operand to be negated.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;NOT&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span></div>



<span class="c1"># --------------------------------------- jumps -------------------------------------- #</span>
<div class="viewcode-block" id="Jump">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.Jump">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Jump</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for various types of jump instruction.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="Jump.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.Jump.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Destination</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            name: The name of the jump instruction.</span>
<span class="sd">            dest: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># Handle Label separately since it&#39;s not an Operand</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">Label</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dest</span> <span class="o">=</span> <span class="n">dest</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dest</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">dest</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_jump_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_jump_destination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_advance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jump_condition</span><span class="p">(</span><span class="n">cpu</span><span class="p">):</span>
            <span class="n">cpu</span><span class="o">.</span><span class="n">set_register</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_jump_destination</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cpu</span><span class="o">.</span><span class="n">set_register</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">cpu</span><span class="o">.</span><span class="n">get_register</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="Jump.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.Jump.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="n">Label</span><span class="p">):</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(dest=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">!r}</span><span class="s2">)&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(dest=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="Jump.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.Jump.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="UnaryJump">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.UnaryJump">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">UnaryJump</span><span class="p">(</span><span class="n">Jump</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for conditions which use a single value to determine jumps.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="UnaryJump.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.UnaryJump.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            name: The name of the jump instruction.</span>
<span class="sd">            dest: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: The operand used to determine if jump condition is met.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">a</span><span class="p">)</span></div>


<div class="viewcode-block" id="UnaryJump.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.UnaryJump.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(dest=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">!r}</span><span class="s2">, a=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="UnaryJump.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.UnaryJump.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="BinaryJump">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BinaryJump">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BinaryJump</span><span class="p">(</span><span class="n">Jump</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for conditions which use two values to determine jumps.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BinaryJump.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BinaryJump.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            name: The name of the jump instruction.</span>
<span class="sd">            dest: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: The first operand used to determine if jump condition is met.</span>
<span class="sd">            b: The second operand used to determine if jump condition is met.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">b</span><span class="p">)</span></div>


<div class="viewcode-block" id="BinaryJump.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BinaryJump.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(dest=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">!r}</span><span class="s2">, a=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">!r}</span><span class="s2">, b=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="BinaryJump.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BinaryJump.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="ExactJumpMixin">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.ExactJumpMixin">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ExactJumpMixin</span><span class="p">(</span><span class="n">Jump</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Mixin for jumps that use an exact position specified by operand.</span>

<span class="sd">    This mixin class defines behavior for jumps where the destination is used directly as</span>
<span class="sd">    the new instruction pointer value, rather than relative to the current position.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_jump_destination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="RelativeJumpMixin">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RelativeJumpMixin">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RelativeJumpMixin</span><span class="p">(</span><span class="n">Jump</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Mixin for jumps that are offset from current location.</span>

<span class="sd">    This mixin class defines behavior for jumps where the destination is used as an offset</span>
<span class="sd">    relative to the current instruction pointer position, rather than an exact position.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_jump_destination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cpu</span><span class="o">.</span><span class="n">get_register</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="UnconditionalJumpMixin">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.UnconditionalJumpMixin">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">UnconditionalJumpMixin</span><span class="p">(</span><span class="n">Jump</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class mixin for always taking a jump.</span>

<span class="sd">    This mixin class defines behavior for jumps that always occur, regardless of any conditions.</span>
<span class="sd">    It implements the jump_condition method to always return True. It does not utilize any</span>
<span class="sd">    operands.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_jump_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>



<div class="viewcode-block" id="IfEqualJumpMixin">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.IfEqualJumpMixin">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">IfEqualJumpMixin</span><span class="p">(</span><span class="n">BinaryJump</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Binary jump condition that triggers when operands are equal.</span>

<span class="sd">    This mixin class defines behavior for jumps that should occur when two specified operands</span>
<span class="sd">    hold equal values. It implements the jump_condition method to compare the resolved values</span>
<span class="sd">    of the operands. It expects an a and b operand.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_jump_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="IfUnequalJumpMixin">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.IfUnequalJumpMixin">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">IfUnequalJumpMixin</span><span class="p">(</span><span class="n">BinaryJump</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Binary jump condition that triggers when operands are not equal.</span>

<span class="sd">    This mixin class defines behavior for jumps that should occur when two specified operands</span>
<span class="sd">    hold unequal values. It implements the jump_condition method to compare the resolved</span>
<span class="sd">    values of the operands. It expects an a and b operand.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_jump_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="IfGTJumpMixin">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.IfGTJumpMixin">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">IfGTJumpMixin</span><span class="p">(</span><span class="n">BinaryJump</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Binary jump condition that triggers when first operand is greater than second operand.</span>

<span class="sd">    This mixin class defines behavior for jumps that should occur when the first specified</span>
<span class="sd">    operand is greater than the second operand. It implements the jump_condition method to</span>
<span class="sd">    compare the resolved values of the operands. It expects an a and b operand.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_jump_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="IfGEJumpMixin">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.IfGEJumpMixin">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">IfGEJumpMixin</span><span class="p">(</span><span class="n">BinaryJump</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Binary jump condition that triggers when first operand is greater than or equal to</span>
<span class="sd">    the second operand.</span>

<span class="sd">    This mixin class defines behavior for jumps that should occur when the first specified</span>
<span class="sd">    operand is greater than or equal to the second operand. It implements the jump_condition</span>
<span class="sd">    method to compare the resolved values of the operands. It expects an a and b operand.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_jump_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span></div>



<div class="viewcode-block" id="IfJumpMixin">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.IfJumpMixin">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">IfJumpMixin</span><span class="p">(</span><span class="n">UnaryJump</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Unary jump condition that triggers when operand is nonzero (truthy).</span>

<span class="sd">    This mixin class defines behavior for jumps that should occur when the specified operand</span>
<span class="sd">    holds a nonzero (truthy) value. It implements the jump_condition method to check if</span>
<span class="sd">    the resolved value is truthy. It expects an a operand.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_jump_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span></div>



<div class="viewcode-block" id="JMP">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JMP">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">JMP</span><span class="p">(</span><span class="n">ExactJumpMixin</span><span class="p">,</span> <span class="n">UnconditionalJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Unconditional jump instruction.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="JMP.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JMP.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Destination</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            dest: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;JMP&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span></div>


<div class="viewcode-block" id="JMP.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JMP.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;JMP(dest=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="JMP.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JMP.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;JMP </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="RJMP">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJMP">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RJMP</span><span class="p">(</span><span class="n">RelativeJumpMixin</span><span class="p">,</span> <span class="n">UnconditionalJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Relative unconditional jump instruction.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RJMP.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJMP.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Destination</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            delta: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;RJMP&quot;</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span></div>


<div class="viewcode-block" id="RJMP.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJMP.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RJMP(dest=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="RJMP.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJMP.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RJMP </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="JEQ">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JEQ">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">JEQ</span><span class="p">(</span><span class="n">ExactJumpMixin</span><span class="p">,</span> <span class="n">IfEqualJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Jump to exact destination if operands are equal.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="JEQ.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JEQ.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            dest: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: First operand to compare.</span>
<span class="sd">            b: Second operand to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;JEQ&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="RJEQ">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJEQ">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RJEQ</span><span class="p">(</span><span class="n">RelativeJumpMixin</span><span class="p">,</span> <span class="n">IfEqualJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Jump to relative destination if operands are equal.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RJEQ.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJEQ.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            delta: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: First operand to compare.</span>
<span class="sd">            b: Second operand to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;RJEQ&quot;</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="JNE">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JNE">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">JNE</span><span class="p">(</span><span class="n">ExactJumpMixin</span><span class="p">,</span> <span class="n">IfUnequalJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Jump to exact destination if operands are not equal.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="JNE.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JNE.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            dest: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: First operand to compare.</span>
<span class="sd">            b: Second operand to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;JNE&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="RJNE">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJNE">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RJNE</span><span class="p">(</span><span class="n">RelativeJumpMixin</span><span class="p">,</span> <span class="n">IfUnequalJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Jump to relative destination if operands are not equal.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RJNE.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJNE.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            delta: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: First operand to compare.</span>
<span class="sd">            b: Second operand to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;RJNE&quot;</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="JGT">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JGT">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">JGT</span><span class="p">(</span><span class="n">ExactJumpMixin</span><span class="p">,</span> <span class="n">IfGTJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Jump to exact destination if first operand is greater than second operand.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="JGT.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JGT.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            dest: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: First operand to compare.</span>
<span class="sd">            b: Second operand to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;JGT&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="RJGT">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJGT">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RJGT</span><span class="p">(</span><span class="n">RelativeJumpMixin</span><span class="p">,</span> <span class="n">IfGTJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Jump to relative destination if first operand is greater than second operand.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RJGT.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJGT.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            delta: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: First operand to compare.</span>
<span class="sd">            b: Second operand to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;RJGT&quot;</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="JGE">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JGE">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">JGE</span><span class="p">(</span><span class="n">ExactJumpMixin</span><span class="p">,</span> <span class="n">IfGEJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Jump to exact destination if first operand is greater than or equal to second operand.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="JGE.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JGE.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            dest: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: First operand to compare.</span>
<span class="sd">            b: Second operand to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;JGE&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="RJGE">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJGE">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RJGE</span><span class="p">(</span><span class="n">RelativeJumpMixin</span><span class="p">,</span> <span class="n">IfGEJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Jump to relative destination if first operand is greater than or equal to second operand.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RJGE.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJGE.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            delta: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: First operand to compare.</span>
<span class="sd">            b: Second operand to compare.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;RJGE&quot;</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="JIF">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JIF">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">JIF</span><span class="p">(</span><span class="n">ExactJumpMixin</span><span class="p">,</span> <span class="n">IfJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Jump to exact destination if operand is nonzero (truthy).&quot;&quot;&quot;</span>

<div class="viewcode-block" id="JIF.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.JIF.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            dest: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: Operand to check for truthiness.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;JIF&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="RJIF">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJIF">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RJIF</span><span class="p">(</span><span class="n">RelativeJumpMixin</span><span class="p">,</span> <span class="n">IfJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Jump to relative destination if operand is nonzero (truthy).&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RJIF.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RJIF.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Destination</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            delta: The destination to jump to (Label, Operand, or int).</span>
<span class="sd">            a: Operand to check for truthiness.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;RJIF&quot;</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span></div>
</div>



<span class="c1"># ---------------------------------- function calls ---------------------------------- #</span>


<div class="viewcode-block" id="CALL">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.CALL">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CALL</span><span class="p">(</span><span class="n">ExactJumpMixin</span><span class="p">,</span> <span class="n">UnconditionalJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Call function at exact destination, pushing return address to stack.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="CALL.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.CALL.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dest</span><span class="p">:</span> <span class="n">Destination</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            dest: The destination to call (Label, Operand, or int).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;CALL&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># Push return address (next instruction) onto stack</span>
        <span class="n">cpu</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">cpu</span><span class="o">.</span><span class="n">get_register</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">0</span>

<div class="viewcode-block" id="CALL.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.CALL.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;CALL(dest=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="CALL.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.CALL.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;CALL </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="RCALL">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RCALL">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RCALL</span><span class="p">(</span><span class="n">RelativeJumpMixin</span><span class="p">,</span> <span class="n">UnconditionalJumpMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Call function at relative destination, pushing return address to stack.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RCALL.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RCALL.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="n">Destination</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            delta: The destination to call (Label, Operand, or int).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;RCALL&quot;</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># Push return address (next instruction) onto stack</span>
        <span class="n">cpu</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">cpu</span><span class="o">.</span><span class="n">get_register</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">0</span>

<div class="viewcode-block" id="RCALL.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RCALL.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RCALL(dest=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="RCALL.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RCALL.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;RCALL </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="RET">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RET">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RET</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return from function by popping return address from stack and jumping to it.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RET.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RET.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;RET&quot;</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_advance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">):</span>
        <span class="c1"># Pop return address from stack and set IP to it</span>
        <span class="n">return_address</span> <span class="o">=</span> <span class="n">cpu</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">cpu</span><span class="o">.</span><span class="n">set_register</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="n">return_address</span><span class="p">)</span>

<div class="viewcode-block" id="RET.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RET.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;RET()&quot;</span></div>


<div class="viewcode-block" id="RET.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RET.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;RET&quot;</span></div>
</div>



<span class="c1"># --------------------------------------- stack -------------------------------------- #</span>


<div class="viewcode-block" id="PUSH">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.PUSH">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">PUSH</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Push operand value onto the stack.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="PUSH.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.PUSH.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: Operand value to push onto the stack.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;PUSH&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">a</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">cpu</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">))</span>
        <span class="k">return</span> <span class="mi">0</span>

<div class="viewcode-block" id="PUSH.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.PUSH.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;PUSH(a=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="PUSH.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.PUSH.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;PUSH </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="POP">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.POP">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">POP</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pop value from the stack.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="POP.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.POP.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            out: Optional output reference to store the popped value. If not provided, value</span>
<span class="sd">                is popped but not stored.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;POP&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="kc">None</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">cpu</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cpu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="mi">0</span>

<div class="viewcode-block" id="POP.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.POP.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;POP(out=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="POP.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.POP.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;POP </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;POP&quot;</span></div>
</div>



<div class="viewcode-block" id="SEMP">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.SEMP">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SEMP</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if stack is empty and store result.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="SEMP.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.SEMP.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            out: Output reference to store the result (1 if empty, 0 if not empty).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;SEMP&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cpu</span><span class="o">.</span><span class="n">stack</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">cpu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">value</span>

<div class="viewcode-block" id="SEMP.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.SEMP.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;SEMP(out=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="SEMP.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.SEMP.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;SEMP </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<span class="c1"># ---------------------------------------- I/O --------------------------------------- #</span>


<div class="viewcode-block" id="CP">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.CP">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CP</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Copy operand value to output reference.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="CP.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.CP.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Reference</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: Source operand to copy from.</span>
<span class="sd">            b: Output reference to copy to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;CP&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">Reference</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;argument `b` must be a Reference&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="n">cpu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">value</span>

<div class="viewcode-block" id="CP.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.CP.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(a=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">!r}</span><span class="s2">, b=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="CP.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.CP.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="NOUT">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NOUT">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NOUT</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Output operand as a number.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="NOUT.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NOUT.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: Operand value to output as a number.</span>
<span class="sd">            b: If nonzero, append newline after output. Defaults to L[0] (no newline).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;NOUT&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">b</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">0</span>

<div class="viewcode-block" id="NOUT.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NOUT.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;NOUT(a=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">!r}</span><span class="s2">, b=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="NOUT.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NOUT.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;NOUT </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="OOUT">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.OOUT">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">OOUT</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Output operand as a character (using chr()).&quot;&quot;&quot;</span>

<div class="viewcode-block" id="OOUT.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.OOUT.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: Operand value to output as a character.</span>
<span class="sd">            b: If nonzero, append newline after output. Defaults to L[0] (no newline).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;OOUT&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">b</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)),</span> <span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">0</span>

<div class="viewcode-block" id="OOUT.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.OOUT.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;OOUT(a=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">!r}</span><span class="s2">, b=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="OOUT.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.OOUT.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;OOUT </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="NIN">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NIN">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NIN</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read number input from user.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="NIN.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NIN.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            out: Output reference to store the input number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;NIN&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">INPUT_PROMPT</span><span class="p">)</span>
        <span class="n">val_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="n">cpu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="p">]</span> <span class="o">=</span> <span class="n">val_int</span>
        <span class="k">return</span> <span class="n">val_int</span>

<div class="viewcode-block" id="NIN.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NIN.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;NIN(out=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="NIN.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.NIN.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;NIN </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="OIN">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.OIN">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">OIN</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read character input from user and store as ordinal value.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="OIN.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.OIN.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            out: Output reference to store the ordinal value of the input character.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;OIN&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;&gt; &quot;</span><span class="p">)</span>
        <span class="n">val_ord</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="n">cpu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="p">]</span> <span class="o">=</span> <span class="n">val_ord</span>
        <span class="k">return</span> <span class="n">val_ord</span>

<div class="viewcode-block" id="OIN.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.OIN.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;OIN(out=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="OIN.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.OIN.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;OIN </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">out</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<div class="viewcode-block" id="BRK">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BRK">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BRK</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Breakpoint: dump CPU state and wait for Enter, then continue execution.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BRK.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BRK.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;BRK&quot;</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># Print in debug format: instruction -&gt; result, then state</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> -&gt; 0&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">cpu</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
        <span class="nb">input</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">0</span></div>



<div class="viewcode-block" id="BRKD">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BRKD">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BRKD</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Debug breakpoint: dump CPU state and switch to debug mode for rest of execution.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="BRKD.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.BRKD.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;BRKD&quot;</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># Print in debug format: instruction -&gt; result, then state</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> -&gt; 0&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">cpu</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
        <span class="c1"># Switch to debug mode - run() will handle waiting for input</span>
        <span class="n">cpu</span><span class="o">.</span><span class="n">debug_mode</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="mi">0</span></div>



<div class="viewcode-block" id="EXIT">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.EXIT">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">EXIT</span><span class="p">(</span><span class="n">Instruction</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exit the program with a status code.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="EXIT.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.EXIT.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status_code</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            status_code: The exit status code. Defaults to L[0] (success).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;EXIT&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span> <span class="o">=</span> <span class="n">as_op</span><span class="p">(</span><span class="n">status_code</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status_code</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>

<div class="viewcode-block" id="EXIT.__repr__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.EXIT.__repr__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Python API representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;EXIT(status_code=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_code</span><span class="si">!r}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="EXIT.__str__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.EXIT.__str__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return assembly text representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;EXIT </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">&quot;</span></div>
</div>



<span class="c1"># ------------------------------------ Randomness ------------------------------------ #</span>


<div class="viewcode-block" id="RND">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RND">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RND</span><span class="p">(</span><span class="n">NullaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a random bit.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RND.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RND.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            out: Output reference for result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;RND&quot;</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">getrandbits</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>



<div class="viewcode-block" id="RINT">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RINT">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RINT</span><span class="p">(</span><span class="n">BinaryOperation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a random number between a and b (inclusive).&quot;&quot;&quot;</span>

<div class="viewcode-block" id="RINT.__init__">
<a class="viewcode-back" href="../../api/index.html#dt31.instructions.RINT.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Operand</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span> <span class="n">out</span><span class="p">:</span> <span class="n">Reference</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            a: Lowest integer value allowed</span>
<span class="sd">            b: Second operand of the addition.</span>
<span class="sd">            out: Optional output reference for result. If not provided, result stored in</span>
<span class="sd">                first operand.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;ADD&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_calc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">DT31</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">cpu</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RINT argument b must be  argument a; got </span><span class="si">{</span><span class="n">a</span><span class="si">=}</span><span class="s2">, </span><span class="si">{</span><span class="n">b</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></div>

</pre></div>
        </article>
      </div>
      <footer>

        <div class="related-pages">


        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Dan Turkel
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s

            <a href="https://github.com/pradyunsg/furo">Furo</a>

          </div>
          <div class="right-details">

          </div>
        </div>

      </footer>
    </div>
    <aside class="toc-drawer no-toc">



    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>
